<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù„ÛŒØ³Øª Ù„ØºØª Ù‡Ø§</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="./assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="./assets/css/Vazir-Code.css" />
  <!-- Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <style>
    .syllable-display {
      margin-top: 20px;
      font-size: 1.2em;
      white-space: nowrap;
      font-family: 'Vazir Code';
      direction: ltr;
      text-align: left;
    }
    .result { text-align: right;}
    td .bi-check-circle-fill { color: #2fa02f;}
    .input-group, .input-group * {
      direction: ltr;
    }
    .nav-link {
      font-family: system-ui;
      font-size: 22px;
    }
    
    /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø± ÙØ´Ø±Ø¯Ù‡ */
    .stats-card {
      border: 1px solid #dee2e6;
      border-radius: 8px;
      margin-bottom: 10px;
      padding-inline: 20px;
      background: white;
      display: inline-flex;
      gap: 11px;
      justify-content: center;
      align-items: center;
    }
    
    .stats-icon {
      font-size: 1.5rem;
    }
    
    .stats-title {
      font-size: 0.85rem;
      color: #6c757d;
      margin-bottom: 5px;
      font-weight: 500;
    }
    
    .stats-number {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 0;
    }
    
    /* Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
    .required-color { color: #ff6b6b; }
    .accepted-color { color: #28a745; }
    .not-accepted-color { color: #ffc107; }
    .auto-color { color: #17a2b8; }
    
    /* Ø¨Ù‡Ø¨ÙˆØ¯ Ø¬Ø¯ÙˆÙ„ */
    .table th {
      font-weight: 600;
      background-color: #f8f9fa !important;
      border-top: 1px solid #dee2e6;
    }
    
    /* Ø¨Ø¯Ù†Ù‡ Ø¬Ø¯ÙˆÙ„ */
    .table tbody tr:hover {
      background-color: rgba(0,0,0,0.02);
    }
    
    /* Ø¯Ú©Ù…Ù‡ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ */
    .collect-btn {
      padding: 8px 20px;
      font-weight: 500;
      border-radius: 6px;
    }
    
    /* Ø¨Ø¯Ù†Ù‡ Ø¬Ø¯Ø§ÙˆÙ„ Ø¨Ø¯ÙˆÙ† Ø±Ù†Ú¯ */
    .table tbody td {
      vertical-align: middle;
    }
    
    /* Ù‡Ø¬Ø§Ù‡Ø§ Ø¯Ø± Ø¬Ø¯ÙˆÙ„ */
    .syllable-badge {
      display: inline-block;
      padding: 3px 8px;
      margin: 2px;
      font-size: 0.8rem;
      border-radius: 4px;
      background: #e9ecef;
      color: #495057;
    }
    
    /* ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§ */
    .status-badge {
      font-size: 0.8rem;
      padding: 4px 8px;
    }
  </style>
</head>
<body style="text-align: center;">
  <!-- Ù‡Ø¯Ø± -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="./index.html">
        <h5 class="mb-0">ğŸ“š Ù¾Ø±ÙˆÚ˜Ù‡ Ù…ØªÙ† Ø¨Ø§Ø² Ø±ÛŒØªÙ…ÛŒÚ©</h5>
      </a>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="./index.html">ØªØ­Ù„ÛŒÙ„ Ø´Ø¹Ø±</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="./list-words.html">Ù„ÛŒØ³Øª Ú©Ù„Ù…Ø§Øª</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./about.html">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</a>
          </li>
        </ul>
      </div>
      <span class="text-muted">Ú©Ù„ Ú©Ù„Ù…Ø§Øª: <span id="totalWords" class="badge badge-light">Û°</span></span>
    </div>
  </nav>
  
  <div class="container mt-4">
    <h3 class="text-center mb-3">ğŸ“– Ú©Ù„Ù…Ø§Øª Ùˆ Ù‡Ø¬Ø§ÛŒ Ø¢Ù†â€ŒÙ‡Ø§</h3>

    <!-- Ø¨Ø®Ø´ Ø¢Ù…Ø§Ø± ÙØ´Ø±Ø¯Ù‡ -->
    <div class="stats-card">
      <div class="required-color stats-icon">
        <i class="bi bi-list-task"></i>
      </div>
      <p class="stats-title">Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù…Ø­Ø§Ø³Ø¨Ù‡</p>
      <h4 class="stats-number count-word-need">Û°</h4>
    </div>
    <div class="stats-card">
      <div class="accepted-color stats-icon">
        <i class="bi bi-check-circle-fill"></i>
      </div>
      <p class="stats-title">ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡</p>
      <h4 class="stats-number count-word-accept">Û°</h4>
    </div>
    <div class="stats-card">
      <div class="not-accepted-color stats-icon">
        <i class="bi bi-exclamation-circle"></i>
      </div>
      <p class="stats-title">ØªØ§ÛŒÛŒØ¯ Ù†Ø´Ø¯Ù‡</p>
      <h4 class="stats-number count-word-not-accept">Û°</h4>
    </div>
    <div class="stats-card">
      <div class="auto-color stats-icon">
        <i class="bi bi-cpu"></i>
      </div>
      <p class="stats-title">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø±</p>
      <h4 class="stats-number count-word-dont-need">Û°</h4>
    </div>
    
    <!-- ÙÛŒÙ„ØªØ±Ù‡Ø§ -->
    <div class="row mb-3">
      <div class="col-md-6">
        <div class="form-group">
          <label for="filterInput" class="form-label">
            <i class="bi bi-search"></i> Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ù„Ù…Ù‡:
          </label>
          <input type="text" id="filterInput" placeholder="Ù…Ø«Ø§Ù„: Ø¨Ø§Ø±Ø§Ù†ØŒ Ø¯Ù„" class="form-control" />
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label for="weightFilterInput" class="form-label">
            <i class="bi bi-funnel"></i> ÙÛŒÙ„ØªØ± ÙˆØ²Ù†:
          </label>
          <div class="input-group">
            <select class="custom-select" id="weightUnitSelect">
              <!-- Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ© Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </select>
            <input type="text" id="weightFilterInput" placeholder="ÙˆØ²Ù† (Ù…Ø«Ø§Ù„: 101)" class="form-control" />
          </div>
        </div>
      </div>
    </div>
    
    <!-- Ø¯Ú©Ù…Ù‡ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ -->
    <div class="text-center mb-3">
      <button class="btn btn-primary collect-btn" onclick="showChoseWord()">
        <i class="bi bi-clipboard-plus"></i> Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ú©Ù„Ù…Ø§Øª Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡
      </button>
    </div>
    
    <!-- Ø¬Ø¯Ø§ÙˆÙ„ -->
    <div class="card mb-3">
      <div class="card-header">
        <strong>Ú©Ù„Ù…Ø§Øª Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø¨Ø±Ø§ÛŒ ØªØ£ÛŒÛŒØ¯</strong>
        <span class="badge badge-secondary" id="requiredCount">Û°</span>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-sm table-hover mb-0">
            <thead>
              <tr>
                <th width="40">#</th>
                <th>Ú©Ù„Ù…Ù‡</th>
                <th>Ù‡Ø¬Ø§Ù‡Ø§</th>
                <th width="100">ÙˆØ¶Ø¹ÛŒØª</th>
                <th width="70">Ø§Ù†ØªØ®Ø§Ø¨</th>
              </tr>
            </thead>
            <tbody id="wordListBody">
              <!-- Ú©Ù„Ù…Ø§Øª Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <div class="card">
      <div class="card-header">
        <strong>Ú©Ù„Ù…Ø§Øª Ø¨Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø±</strong>
        <span class="badge badge-secondary" id="autoCount">Û°</span>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-sm table-hover mb-0">
            <thead>
              <tr>
                <th width="40">#</th>
                <th>Ú©Ù„Ù…Ù‡</th>
                <th>Ù‡Ø¬Ø§Ù‡Ø§</th>
                <th width="100">ÙˆØ¶Ø¹ÛŒØª</th>
                <th width="70">Ø§Ù†ØªØ®Ø§Ø¨</th>
              </tr>
            </thead>
            <tbody id="wordListBody2">
              <!-- Ú©Ù„Ù…Ø§Øª Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  
  <script src="./assets/js/word-list-dont-need.js"></script>
  <script src="./assets/js/check-poem.js"></script>
  <script>
    function printWords() {
      const inputText = document.querySelector('#filterInput');
      const weightInput = document.querySelector('#weightFilterInput');
      const filterValue = inputText.value.toLowerCase();
      const weightFilterValue = weightInput.value.toUpperCase();
      
      const htmlList = Object.keys(wordList)
        .filter((item) => {
          // ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ú©Ù„Ù…Ù‡
          const matchesWord = item.includes(filterValue);
          // ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ baseWordShape
          let matchesWeight = true;
          if(weightInput.value !== '') {
            const shape = getShapeOfWord(wordList[item]);
            matchesWeight = shape == weightFilterValue;
          }
          
          return matchesWord && matchesWeight;
        })
        .map((item, key) => `<tr>
          <td>${key + 1}</td>
          <td>${item}</td>
          <td>${wordList[item].join(' + ')}</td>
          <td>
             ${acceptWordList[item] != null
                ? `<i class="bi bi-check-circle-fill text-success"></i>`
                : `<i class="bi bi-exclamation-circle text-warning"></i>`
              }
          </td>
          <td>
            <input name="word" value="${item}" type="checkbox" />
          </td>
      </tr>`).join('');
      
      document.querySelector('#wordListBody').innerHTML = htmlList;
    }

    function printWords2() {
      const inputText = document.querySelector('#filterInput');
      const weightInput = document.querySelector('#weightFilterInput');
      const filterValue = inputText.value.toLowerCase();
      const weightFilterValue = weightInput.value.toUpperCase();
      
      const htmlList = Object.keys(wordListDontNeed)
        .filter((item) => {
          // ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ú©Ù„Ù…Ù‡
          const matchesWord = item.includes(filterValue);
          // ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ baseWordShape
          let matchesWeight = true;
          if(weightInput.value !== '') {
            const shape = getShapeOfWord(wordListDontNeed[item]);
            matchesWeight = shape == weightFilterValue;
          }
          
          return matchesWord && matchesWeight;
        })
        .map((item, key) => `<tr>
          <td>${key + 1}</td>
          <td>${item}</td>
          <td>${wordListDontNeed[item].join(' + ')}</td>
          <td><i class="bi bi-cpu text-info"></i></td>
          <td>
            <input name="word" value="${item}" type="checkbox" />
          </td>
      </tr>`).join('');
      
      document.querySelector('#wordListBody2').innerHTML = htmlList;
    }

    printWords();
    printWords2();
    addBaseWordToSelect();
  
    let allWords = {};

    function loadWords() {
      if (wordList && wordListDontNeed) {
        // ØªØ±Ú©ÛŒØ¨ Ø¯Ùˆ Ù„ÛŒØ³Øª
        allWords = {...wordList, ...wordListDontNeed};
        
        document.getElementById('totalWords').textContent = Object.keys(allWords).length;
        document.querySelector('.count-word-need').innerHTML = Object.keys(wordList).length;
        document.querySelector('.count-word-accept').innerHTML = Object.keys(acceptWordList).length;
        document.querySelector('.count-word-not-accept').innerHTML = Object.keys(wordList).length - Object.keys(acceptWordList).length;
        document.querySelector('.count-word-dont-need').innerHTML = Object.keys(wordListDontNeed).length;

        console.log(`âœ… ${Object.keys(allWords).length} Ú©Ù„Ù…Ù‡ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø´Ø¯`);
      }
    }
    
    loadWords();

    function showChoseWord() {
      const inputList = document.querySelectorAll('[type="checkbox"]');
      const result = [...inputList].filter((input) => input.checked).map((item) => item.value).join('\n');
      navigator.clipboard.writeText(result);
      alert('Copy below text to clipboard. \n'+result);
    }

    function addBaseWordToSelect() {
      // Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ù†ØµØ± Ø³Ù„Ú©Øª
      const selectElement = document.getElementById('weightUnitSelect');
      const weightInput = document.querySelector('#weightFilterInput');
      selectElement.innerHTML = '<option value="">Ø§Ù†ØªØ®Ø§Ø¨ ÙˆØ²Ù†...</option>';
      // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ Ø³Ù„Ú©Øª
      for (const key in baseWord) {
          const option = document.createElement('option');
          option.value = key;
          const shape = baseWordShape[key];
          option.textContent = key+' = '+ shape; // Ù…ØªÙ† Ú¯Ø²ÛŒÙ†Ù‡
          if(weightInput.value.toUpperCase() == shape)
          {
            option.selected = true;
          }
          selectElement.appendChild(option);
      }
    }

    function choseWeight()
    {
      const selectElement = document.getElementById('weightUnitSelect');
      const weightInput = document.querySelector('#weightFilterInput');
      const chose = selectElement.value;
      weightInput.value = baseWordShape[chose] || '';
      printWords();
      printWords2();
    }

    // ÙÛŒÙ„ØªØ± Ú©Ø±Ø¯Ù† Ú©Ù„Ù…Ø§Øª
    document.getElementById('filterInput').addEventListener('input', function() {
      printWords();
      printWords2();
    });

    document.getElementById('weightFilterInput').addEventListener('input', function() {
      printWords();
      printWords2();
      addBaseWordToSelect();
    });

    // Ø±ÙˆÛŒØ¯Ø§Ø¯ ØªØºÛŒÛŒØ± Ø¯Ø± Ø³Ù„Ú©Øª ÙˆØ²Ù†
    document.getElementById('weightUnitSelect').addEventListener('change', choseWeight);

    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
    addBaseWordToSelect();
  </script>
</body>
</html>